<!DOCTYPE html/>
<html ng-app="MyApp">

<head>
    <!-- TODO: load JS after html to improve rendering time -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <!-- script src="js/angular.min.js"></script -->

    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
    <!-- script src="js/underscore-min.js"></script -->

    <!-- load app module(s) _after_ angular (otherwise you'll get 'angular not defined') -->
    <script src="js/angular-elastic-input.min.js"/></script>

    <script src="js/my-app.js"/></script>

    <!-- bootstrap -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- link rel="stylesheet" href="css/bootstrap.min.css" -->

    <link rel="stylesheet" href="css/my-app.css">

    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.css">
    <!-- link rel="stylesheet" href="css/angular-material.min.css" -->
  
    <!-- Angular Material requires Angular.js Libraries -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-animate.min.js"></script>
    <!-- script src="js/angular-animate.min.js"></script -->

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-aria.min.js"></script>
    <script src="js/angular-aria.min.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-messages.min.js"></script>
    <!-- script src="js/angular-messages.min.js"></script -->

    <!-- Angular Material Library -->
    <script src="//ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.js"></script>
    <!-- script src="js/angular-material.min.js"></script -->

    <!-- Chart.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
    <!-- script src="js/Chart.js"></script -->
</head>

<body>
    <div id="tm-page-header" class="container-fluid">
        <div class="container">
            <a href="/">Home</a>
            <a href="/trans.html">Transactions</a>
        </div>
    </div>

    <div class="container" ng-controller="AccountPageController">

        <!-- account summary -->
        <div class="tm-portal tm-account-summary" ng-controller="SingleAccountSummaryController">
            <h3>Account Summary</h3>
            <table class="table table-condensed table-hover tm-account-list">
                <tr ng-include="'templates/account-th.html'"></tr>
                <tr ng-include="'templates/account-tr.html'"></tr>
            </table>
            <div class="text-center"> 
                <img src="icons/thinking.gif" ng-if="isThinking"/>
            </div>
        </div>

        <!-- account charts -->
        <div class="tm-portal" ng-controller="AccountTimeSeriesChartController">
            <h3>Time Series: Account Balance</h3>
            <div class="text-center">
                <div class="tm-tran-canvas-thinking" > 
                    <img src="icons/thinking.gif" ng-if="isChartThinking"/>
                </div>
                <canvas id="valueChart" width="1000" height="350"></canvas>
            </div>
        </div>

        <div>
            <div class="tm-portal" ng-controller="TranChartController">
                <h3>Chart: Transactions 
                    <small>(<a href="" ng-click="renderChartByTime(chartTrans)">by time</a>)</small> 
                    <small>(<a href="" ng-click="renderChartByTags(chartTrans)">by tags</a>)</small>
                </h3>

                <div class="text-center">
                    <div class="tm-tran-canvas-thinking" > 
                        <img src="icons/thinking.gif" ng-if="isChartThinking"/>
                    </div>
                    <canvas id="tm-tran-canvas-element" width="1000" height="350"></canvas>
                </div>
            </div>

            <div class="tm-portal" ng-controller="TranListController" >
                <h3>Transactions <small>[{{trans.length}} of {{transSummary.count}}]</small> <span class="tm-grand-total"><small>Total Amount:</small> <span tm-is-debit="{{transSummary.amountValue < 0}}">{{ transSummary.amountValue | currency }}</span></span> </h3>
                <table class="table table-condensed table-hover tm-tran-table">
                    <tr ng-include="'templates/tran-th.html'"></tr>
                    <tr ng-repeat="tran in trans" ng-include="'templates/tran-tr.html'"></tr>

                    <tr class="tm-list-totals">
                        <th></th>
                        <th class="text-right" tm-is-debit="{{ transSums['amountValue'] < 0 }}" >{{ transSums['amountValue'] | currency}}</th>
                        <th></th>    <!-- pending -->
                        <th>Total</th>
                        <th></th>
                        <th></th>
                    </tr>
                </table>
                <img src="icons/thinking.gif" ng-if="isThinking"/>
                <button ng-if="!areAllTransFetched && !isThinking" class="btn btn-info btn-sm" ng-click="fetchNextPage()">more</button>
                <!-- button ng-if="!areAllTransFetched && !isThinking" class="btn btn-info btn-sm tm-fetch-all-trans-button" ng-click="fetchAllRemainingTrans()">all</button -->
            </div>
        </div>
    </div>

    <div id="tm-page-footer" class="container-fluid">
    </div>

</body>
</html>

